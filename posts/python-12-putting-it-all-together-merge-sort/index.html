<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Python Tutorial: 12. Putting it All Together - Merge Sort | Tiexin Guo</title><meta name=keywords content="python"><meta name=description content="Now that we finished learning about Python&rsquo;s major quirks and features, let&rsquo;s put it into action. Today, let&rsquo;s see how to write a &ldquo;sort&rdquo; algorithm for lists. 1 Python Built-In Sort Recap As aforementioned in chapter 5 of this tutorial, Python lists have a built-in list.sort() method that modifies the list in-place. There is also a sorted() built-in function that builds a new sorted list from an iterable. sorted() returns"><meta name=author content="Tiexin Guo | 郭铁心"><link rel=canonical href=https://www.guotiexin.com/posts/python-12-putting-it-all-together-merge-sort/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.guotiexin.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.guotiexin.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.guotiexin.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.guotiexin.com/apple-touch-icon.png><link rel=mask-icon href=https://www.guotiexin.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Python Tutorial: 12. Putting it All Together - Merge Sort"><meta property="og:description" content="Now that we finished learning about Python&rsquo;s major quirks and features, let&rsquo;s put it into action. Today, let&rsquo;s see how to write a &ldquo;sort&rdquo; algorithm for lists. 1 Python Built-In Sort Recap As aforementioned in chapter 5 of this tutorial, Python lists have a built-in list.sort() method that modifies the list in-place. There is also a sorted() built-in function that builds a new sorted list from an iterable. sorted() returns"><meta property="og:type" content="article"><meta property="og:url" content="https://www.guotiexin.com/posts/python-12-putting-it-all-together-merge-sort/"><meta property="og:image" content="https://www.guotiexin.com/1200px-Python-logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-26T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-26T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.guotiexin.com/1200px-Python-logo.png"><meta name=twitter:title content="Python Tutorial: 12. Putting it All Together - Merge Sort"><meta name=twitter:description content="Now that we finished learning about Python&rsquo;s major quirks and features, let&rsquo;s put it into action. Today, let&rsquo;s see how to write a &ldquo;sort&rdquo; algorithm for lists. 1 Python Built-In Sort Recap As aforementioned in chapter 5 of this tutorial, Python lists have a built-in list.sort() method that modifies the list in-place. There is also a sorted() built-in function that builds a new sorted list from an iterable. sorted() returns"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.guotiexin.com/posts/"},{"@type":"ListItem","position":3,"name":"Python Tutorial: 12. Putting it All Together - Merge Sort","item":"https://www.guotiexin.com/posts/python-12-putting-it-all-together-merge-sort/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Python Tutorial: 12. Putting it All Together - Merge Sort","name":"Python Tutorial: 12. Putting it All Together - Merge Sort","description":"Now that we finished learning about Python\u0026rsquo;s major quirks and features, let\u0026rsquo;s put it into action. Today, let\u0026rsquo;s see how to write a \u0026ldquo;sort\u0026rdquo; algorithm for lists. 1 Python Built-In Sort Recap As aforementioned in chapter 5 of this tutorial, Python lists have a built-in list.sort() method that modifies the list in-place. There is also a sorted() built-in function that builds a new sorted list from an iterable. sorted() returns","keywords":["python"],"articleBody":"Now that we finished learning about Python’s major quirks and features, let’s put it into action.\nToday, let’s see how to write a “sort” algorithm for lists.\n1 Python Built-In Sort Recap As aforementioned in chapter 5 of this tutorial, Python lists have a built-in list.sort() method that modifies the list in-place.\nThere is also a sorted() built-in function that builds a new sorted list from an iterable.\nsorted() returns a new list, and it doesn’t change the original list:\n\u003e\u003e\u003e sorted([5, 2, 3, 1, 4]) [1, 2, 3, 4, 5] \u003e\u003e\u003e sorted([5, 2, 3, 1, 4], reverse=True) [5, 4, 3, 2, 1] Adding reverse=True will sort the list in descending order.\nlist.sort() method doesn’t return a value, but it changes the list on in-place:\n\u003e\u003e\u003e a = [5, 2, 3, 1, 4] \u003e\u003e\u003e a.sort() \u003e\u003e\u003e a [1, 2, 3, 4, 5] \u003e\u003e\u003e a.sort(reverse=True) [5, 4, 3, 2, 1] Same as the sorted() function, list.sort() can also use reverse=True.\nIt’s worth mentioning that list.sort() only works for lists, but the sorted() function accepts any iterable, and you can define a “key” which is a function that takes a single argument and returns a key to use for sorting purposes. Example:\n\u003e\u003e\u003e student_tuples = [ ... ('john', 'A', 15), ... ('jane', 'B', 12), ... ('dave', 'B', 10), ... ] \u003e\u003e\u003e sorted(student_tuples, key=lambda student: student[2]) # sort by age [('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)] Note that there is a new syntax lambda student: student[2]: the lambda keyword defines a new function without a name. The input parameter of the function is student, and the return result is student[2]. So, the above code will sort the student_tuples by each student’s 2nd column (age.)\n2 Writing Our Own Sort Function - Bubble Sort Now that we know how to use sort functions in Python, let’s dive deeper.\nHow is a sort function implemented? How does it work? How to write one ourselves?\nFirst, let’s try to implement a “bubble sort”:\nBubble sort, sometimes referred to as sinking sort, is a simple sorting algorithm that repeatedly steps through the list, compares adjacent elements, and swaps them if they are in the wrong order. The pass through the list is repeated until the list is sorted. The algorithm, which is a comparison sort, is named for the way smaller or larger elements “bubble” to the top of the list.\nIt works like this:\nThe first pass starts at the first element and ends at the last. After the first pass, the largest element will be moved to the end of the list.\nThen the second pass starts at the first element and ends at the second-to-last. After the second pass, the second-largest number will be moved to the second-to-last position on the list.\nNow let’s implement that:\ndef bubble_sort(arr): n = len(arr) # the ith round for i in range(n): # the last i item has already been in place for j in range(n-i-1): # swap if the former one is bigger than the latter if arr[j] \u003e arr[j+1]: arr[j], arr[j+1] = arr[j+1], arr[j] in the 1st round, there are (n-1) comparisons in the 2nd round, there are (n-2) comparisons in the last (n-1) round, there is 1 comparison Average comparisons are (according to the arithmetic sequence’s sum formula): ((n-1) + 1 ) * (n-1) / 2, which is average average complexity of O(n^2).\n3 Merge Sort The bubbles sort algorithm is probably the easiest sort to implement, but it’s not very efficient, since most practical sorting algorithms have substantially better worst-case or average complexity, often O(nlogn).\nLet’s look at one of the O(nlogn) algorithms: merge sort.\nMerge sort (also commonly spelled as mergesort) is an efficient, general-purpose, and comparison-based sorting algorithm. First, divide the list into the smallest unit (1 element), then compare each element with the adjacent list to sort and merge the two adjacent lists. Finally, all the elements are sorted and merged.\nTo merge two sorted lists: we compare the first element of each list, take the smaller one, and put it into the result, then loop. When either of the two lists is exhausted, we need to append the other list’s remaining elements to the result.\ndef merge(l1, l2): res = [] i, j = 0, 0 while i \u003c len(l1) and j \u003c len(l2): if l1[i] \u003c= l2[j]: res.append(l1[i]) i += 1 else: res.append(l2[j]) j += 1 res = res + l1[i:] + l2[j:] return res We use “recursion” (defining a problem in terms of itself) to divide and conquer the merge sort problem:\ndef merge_sort(l): if len(l) \u003c= 1: return l mid = len(l)//2 l1 = merge_sort(l[:mid]) # recursion l2 = merge_sort(l[mid:]) # recursion res = merge(l1, l2) return res ","wordCount":"785","inLanguage":"en","image":"https://www.guotiexin.com/1200px-Python-logo.png","datePublished":"2022-07-26T00:00:00Z","dateModified":"2022-07-26T00:00:00Z","author":{"@type":"Person","name":"Tiexin Guo | 郭铁心"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.guotiexin.com/posts/python-12-putting-it-all-together-merge-sort/"},"publisher":{"@type":"Organization","name":"Tiexin Guo","logo":{"@type":"ImageObject","url":"https://www.guotiexin.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.guotiexin.com accesskey=h title="Tiexin Guo (Alt + H)">Tiexin Guo</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.guotiexin.com/about title=About><span>About</span></a></li><li><a href=https://cv.guotiexin.com/ title=CV><span>CV</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.guotiexin.com/portfolio title=Portfolio><span>Portfolio</span></a></li><li><a href=https://www.guotiexin.com/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://www.guotiexin.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://www.guotiexin.com/posts/ title=Archive><span>Archive</span></a></li><li><a href=https://github.com/ironcore864 title><span><i class='fab fa-github fa-fw'></i></span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Python Tutorial: 12. Putting it All Together - Merge Sort</h1><div class=post-meta><span title='2022-07-26 00:00:00 +0000 UTC'>July 26, 2022</span>&nbsp;·&nbsp;Tiexin Guo | 郭铁心</div></header><figure class=entry-cover><img loading=lazy srcset="https://www.guotiexin.com/posts/python-12-putting-it-all-together-merge-sort/1200px-Python-logo_hu045f2141945506c13010afa00dd5ce3b_115458_360x0_resize_box_3.png 360w ,https://www.guotiexin.com/posts/python-12-putting-it-all-together-merge-sort/1200px-Python-logo_hu045f2141945506c13010afa00dd5ce3b_115458_480x0_resize_box_3.png 480w ,https://www.guotiexin.com/posts/python-12-putting-it-all-together-merge-sort/1200px-Python-logo_hu045f2141945506c13010afa00dd5ce3b_115458_720x0_resize_box_3.png 720w ,https://www.guotiexin.com/posts/python-12-putting-it-all-together-merge-sort/1200px-Python-logo_hu045f2141945506c13010afa00dd5ce3b_115458_1080x0_resize_box_3.png 1080w ,https://www.guotiexin.com/posts/python-12-putting-it-all-together-merge-sort/1200px-Python-logo_hu045f2141945506c13010afa00dd5ce3b_115458_1500x0_resize_box_3.png 1500w ,https://www.guotiexin.com/posts/python-12-putting-it-all-together-merge-sort/1200px-Python-logo.png 3967w" sizes="(min-width: 768px) 720px, 100vw" src=https://www.guotiexin.com/posts/python-12-putting-it-all-together-merge-sort/1200px-Python-logo.png alt="Python Tutorial" width=3967 height=1493></figure><div class=post-content><p>Now that we finished learning about Python&rsquo;s major quirks and features, let&rsquo;s put it into action.</p><p>Today, let&rsquo;s see how to write a &ldquo;sort&rdquo; algorithm for lists.</p><h2 id=1-python-built-in-sort-recap>1 Python Built-In Sort Recap<a hidden class=anchor aria-hidden=true href=#1-python-built-in-sort-recap>#</a></h2><p>As aforementioned in <a href=../python-05-data-structures-1/>chapter 5 of this tutorial</a>, Python lists have a built-in <code>list.sort()</code> method that modifies the list <em>in-place</em>.</p><p>There is also a <code>sorted()</code> built-in function that <em>builds a new sorted list</em> from an iterable.</p><p><code>sorted()</code> returns a new list, and it doesn&rsquo;t change the original list:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=nb>sorted</span><span class=p>([</span><span class=mi>5</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=nb>sorted</span><span class=p>([</span><span class=mi>5</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=n>reverse</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span>
</span></span></code></pre></div><p>Adding <code>reverse=True</code> will sort the list in descending order.</p><p><code>list.sort()</code> method doesn&rsquo;t return a value, but it changes the list on in-place:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>sort</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=n>reverse</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span>
</span></span></code></pre></div><p>Same as the <code>sorted()</code> function, <code>list.sort()</code> can also use <code>reverse=True</code>.</p><p>It&rsquo;s worth mentioning that <code>list.sort()</code> only works for lists, but the <code>sorted()</code> function accepts any iterable, and you can define a &ldquo;key&rdquo; which is a function that takes a single argument and returns a key to use for sorting purposes. Example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>student_tuples</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl><span class=o>...</span>     <span class=p>(</span><span class=s1>&#39;john&#39;</span><span class=p>,</span> <span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=mi>15</span><span class=p>),</span>
</span></span><span class=line><span class=cl><span class=o>...</span>     <span class=p>(</span><span class=s1>&#39;jane&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>12</span><span class=p>),</span>
</span></span><span class=line><span class=cl><span class=o>...</span>     <span class=p>(</span><span class=s1>&#39;dave&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span>
</span></span><span class=line><span class=cl><span class=o>...</span> <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>student_tuples</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>student</span><span class=p>:</span> <span class=n>student</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span>   <span class=c1># sort by age</span>
</span></span><span class=line><span class=cl><span class=p>[(</span><span class=s1>&#39;dave&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;jane&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>12</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;john&#39;</span><span class=p>,</span> <span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=mi>15</span><span class=p>)]</span>
</span></span></code></pre></div><p>Note that there is a new syntax <code>lambda student: student[2]</code>: the <code>lambda</code> keyword defines a new function without a name. The input parameter of the function is <code>student</code>, and the return result is <code>student[2]</code>. So, the above code will sort the student_tuples by each student&rsquo;s 2nd column (age.)</p><hr><h2 id=2-writing-our-own-sort-function---bubble-sort>2 Writing Our Own Sort Function - Bubble Sort<a hidden class=anchor aria-hidden=true href=#2-writing-our-own-sort-function---bubble-sort>#</a></h2><p>Now that we know how to use sort functions in Python, let&rsquo;s dive deeper.</p><p>How is a sort function implemented? How does it work? How to write one ourselves?</p><p>First, let&rsquo;s try to implement a &ldquo;bubble sort&rdquo;:</p><blockquote><p>Bubble sort, sometimes referred to as sinking sort, is a simple sorting algorithm that repeatedly steps through the list, compares adjacent elements, and swaps them if they are in the wrong order. The pass through the list is repeated until the list is sorted. The algorithm, which is a comparison sort, is named for the way smaller or larger elements &ldquo;bubble&rdquo; to the top of the list.</p></blockquote><p>It works like this:</p><p><img loading=lazy src=./Bubble-sort-example-300px.gif alt></p><p>The first pass starts at the first element and ends at the last. After the first pass, the largest element will be moved to the end of the list.</p><p>Then the second pass starts at the first element and ends at the second-to-last. After the second pass, the second-largest number will be moved to the second-to-last position on the list.</p><p>Now let&rsquo;s implement that:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>bubble_sort</span><span class=p>(</span><span class=n>arr</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>n</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>arr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># the ith round</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># the last i item has already been in place</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>n</span><span class=o>-</span><span class=n>i</span><span class=o>-</span><span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=c1># swap if the former one is bigger than the latter</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>arr</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>arr</span><span class=p>[</span><span class=n>j</span><span class=o>+</span><span class=mi>1</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=n>arr</span><span class=p>[</span><span class=n>j</span><span class=p>],</span> <span class=n>arr</span><span class=p>[</span><span class=n>j</span><span class=o>+</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>arr</span><span class=p>[</span><span class=n>j</span><span class=o>+</span><span class=mi>1</span><span class=p>],</span> <span class=n>arr</span><span class=p>[</span><span class=n>j</span><span class=p>]</span>
</span></span></code></pre></div><ul><li>in the 1st round, there are (n-1) comparisons</li><li>in the 2nd round, there are (n-2) comparisons</li><li>in the last (n-1) round, there is 1 comparison</li></ul><p>Average comparisons are (according to the arithmetic sequence&rsquo;s sum formula): <code>((n-1) + 1 ) * (n-1) / 2</code>, which is average average complexity of <code>O(n^2)</code>.</p><hr><h2 id=3-merge-sort>3 Merge Sort<a hidden class=anchor aria-hidden=true href=#3-merge-sort>#</a></h2><p>The bubbles sort algorithm is probably the easiest sort to implement, but it&rsquo;s not very efficient, since most practical sorting algorithms have substantially better worst-case or average complexity, often <code>O(nlogn)</code>.</p><p>Let&rsquo;s look at one of the <code>O(nlogn)</code> algorithms: merge sort.</p><p>Merge sort (also commonly spelled as mergesort) is an efficient, general-purpose, and comparison-based sorting algorithm. First, divide the list into the smallest unit (1 element), then compare each element with the adjacent list to sort and merge the two adjacent lists. Finally, all the elements are sorted and merged.</p><p><img loading=lazy src=./Merge-sort-example-300px.gif alt></p><p>To merge two sorted lists: we compare the first element of each list, take the smaller one, and put it into the result, then loop. When either of the two lists is exhausted, we need to append the other list&rsquo;s remaining elements to the result.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>merge</span><span class=p>(</span><span class=n>l1</span><span class=p>,</span> <span class=n>l2</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>res</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=n>i</span><span class=p>,</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=n>l1</span><span class=p>)</span> <span class=ow>and</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=n>l2</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>l1</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>l2</span><span class=p>[</span><span class=n>j</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=n>res</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>l1</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
</span></span><span class=line><span class=cl>            <span class=n>i</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>res</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>l2</span><span class=p>[</span><span class=n>j</span><span class=p>])</span>
</span></span><span class=line><span class=cl>            <span class=n>j</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>res</span> <span class=o>=</span> <span class=n>res</span> <span class=o>+</span> <span class=n>l1</span><span class=p>[</span><span class=n>i</span><span class=p>:]</span> <span class=o>+</span> <span class=n>l2</span><span class=p>[</span><span class=n>j</span><span class=p>:]</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>res</span>
</span></span></code></pre></div><p>We use &ldquo;recursion&rdquo; (defining a problem in terms of itself) to divide and conquer the merge sort problem:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>merge_sort</span><span class=p>(</span><span class=n>l</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>l</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>l</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>mid</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>l</span><span class=p>)</span><span class=o>//</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=n>l1</span> <span class=o>=</span> <span class=n>merge_sort</span><span class=p>(</span><span class=n>l</span><span class=p>[:</span><span class=n>mid</span><span class=p>])</span> <span class=c1># recursion</span>
</span></span><span class=line><span class=cl>    <span class=n>l2</span> <span class=o>=</span> <span class=n>merge_sort</span><span class=p>(</span><span class=n>l</span><span class=p>[</span><span class=n>mid</span><span class=p>:])</span> <span class=c1># recursion</span>
</span></span><span class=line><span class=cl>    <span class=n>res</span> <span class=o>=</span> <span class=n>merge</span><span class=p>(</span><span class=n>l1</span><span class=p>,</span> <span class=n>l2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>res</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.guotiexin.com/tags/python/>python</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://www.guotiexin.com>Tiexin Guo</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>