<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Python Tutorial: 7. Modules - Organizing Code | Tiexin Guo</title><meta name=keywords content="python"><meta name=description content="0 Background So far, we&rsquo;ve been coding in the Python interpreter, which if we quit and re-enter, the functions and variables definitions we&rsquo;ve made previously are lost.
Therefore, if you want to write a somewhat longer program, you&rsquo;d be better off using a text editor to prepare the input for the interpreter and running it with that file as input instead - which is known as creating a script.
As your program gets longer, you may want to split it into several files for easier maintenance."><meta name=author content="IronCore"><link rel=canonical href=https://www.guotiexin.com/posts/python-07-code-organization/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.guotiexin.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.guotiexin.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.guotiexin.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.guotiexin.com/apple-touch-icon.png><link rel=mask-icon href=https://www.guotiexin.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Python Tutorial: 7. Modules - Organizing Code"><meta property="og:description" content="0 Background So far, we&rsquo;ve been coding in the Python interpreter, which if we quit and re-enter, the functions and variables definitions we&rsquo;ve made previously are lost.
Therefore, if you want to write a somewhat longer program, you&rsquo;d be better off using a text editor to prepare the input for the interpreter and running it with that file as input instead - which is known as creating a script.
As your program gets longer, you may want to split it into several files for easier maintenance."><meta property="og:type" content="article"><meta property="og:url" content="https://www.guotiexin.com/posts/python-07-code-organization/"><meta property="og:image" content="https://www.guotiexin.com/1200px-Python-logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-15T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-15T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.guotiexin.com/1200px-Python-logo.png"><meta name=twitter:title content="Python Tutorial: 7. Modules - Organizing Code"><meta name=twitter:description content="0 Background So far, we&rsquo;ve been coding in the Python interpreter, which if we quit and re-enter, the functions and variables definitions we&rsquo;ve made previously are lost.
Therefore, if you want to write a somewhat longer program, you&rsquo;d be better off using a text editor to prepare the input for the interpreter and running it with that file as input instead - which is known as creating a script.
As your program gets longer, you may want to split it into several files for easier maintenance."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.guotiexin.com/posts/"},{"@type":"ListItem","position":3,"name":"Python Tutorial: 7. Modules - Organizing Code","item":"https://www.guotiexin.com/posts/python-07-code-organization/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Python Tutorial: 7. Modules - Organizing Code","name":"Python Tutorial: 7. Modules - Organizing Code","description":"0 Background So far, we\u0026rsquo;ve been coding in the Python interpreter, which if we quit and re-enter, the functions and variables definitions we\u0026rsquo;ve made previously are lost.\nTherefore, if you want to write a somewhat longer program, you\u0026rsquo;d be better off using a text editor to prepare the input for the interpreter and running it with that file as input instead - which is known as creating a script.\nAs your program gets longer, you may want to split it into several files for easier maintenance.","keywords":["python"],"articleBody":"0 Background So far, we’ve been coding in the Python interpreter, which if we quit and re-enter, the functions and variables definitions we’ve made previously are lost.\nTherefore, if you want to write a somewhat longer program, you’d be better off using a text editor to prepare the input for the interpreter and running it with that file as input instead - which is known as creating a script.\nAs your program gets longer, you may want to split it into several files for easier maintenance. You may also want to use a handy function that you’ve written in several programs without copying its definition into each program.\nThis is where the Python module kicks in.\n1 Module A module is a file containing Python definitions and statements. The file name is the module name with the suffix .py appended. Within a module, the module’s name (as a string) is available as the value of the global variable __name__.\nEach file can be a module, and definitions from a module can be imported into other modules or the main module.\nFor instance, use your favorite text editor (VIM or VSCode?) to create a file called fibo.py in the current directory with the following contents:\ndef fib(n): # write Fibonacci series up to n a, b = 0, 1 while a \u003c n: print(a, end=' ') a, b = b, a+b print() def fib2(n): # return Fibonacci series up to n result = [] a, b = 0, 1 while a \u003c n: result.append(a) a, b = b, a+b return result Now if we start the Python interpreter from the directory where the fibo.py is located, we can import it and call the functions defined in it:\n\u003e\u003e\u003e import fibo \u003e\u003e\u003e fibo.fib(1000) 0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 \u003e\u003e\u003e fibo.fib2(100) [0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89] \u003e\u003e\u003e fibo.__name__ 'fibo' 2 More on Modules A module can contain executable statements (besides function definitions.)\nThese statements are intended to initialize the module. They are executed only the first time the module name is encountered in an import statement, and they are also run if the file is executed as a script.\nModules can import other modules.\nIt is customary (but not required) to place all import statements at the beginning of a module (or script, for that matter).\nThere is a variant of the import statement that imports certain names from a module only, directly, instead of importing the module:\n\u003e\u003e\u003e from fibo import fib, fib2 \u003e\u003e\u003e fib(500) 0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 This does not introduce the module name (so in the example, fibo is not defined.)\nThere is even a variant to import all names that a module defines:\n\u003e\u003e\u003e from fibo import * \u003e\u003e\u003e fib(500) 0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 The “*” means to import all names, but do not use this since it introduces an unknown set of names and causes poorly readable code. (It is okay to use it to save typing in interactive sessions, though.)\nIf the module name is followed by as, then it acts as if the name of the module is changed:\n\u003e\u003e\u003e import fibo as fib \u003e\u003e\u003e fib.fib(500) 0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 This is effectively importing the module in the same way that import fibo will do, with the only difference of it being available as fib.\nIt can also be used when utilizing from with similar effects:\n\u003e\u003e\u003e from fibo import fib as fibonacci \u003e\u003e\u003e fibonacci(500) 0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 3 Executing modules as scripts When you run a Python module with\npython fibo.py the code in the module will be executed, just as if you imported it, but with the __name__ set to “main” (instead of ‘fibo’ which is the file/module name). That means that by adding this code at the end of your module:\nif __name__ == \"__main__\": import sys fib(int(sys.argv[1])) you can make the file usable as a script as well as an importable module because the code that parses the command line only runs if the module is executed as the “main” file:\n$ python fibo.py 50 0 1 1 2 3 5 8 13 21 34 If the module is imported, the code is not run:\n\u003e\u003e\u003e import fibo This is often used either to provide a convenient user interface to a module, or for testing purposes (running the module as a script executes a test suite).\n4 Standard Modules Python comes with a library of standard modules which provide access to operations that are not part of the core of the language but are nevertheless built in, either for efficiency or to provide access to operating system primitives such as system calls.\nOne particular module deserves some attention: sys, which is built into every Python interpreter:\n\u003e\u003e\u003e import sys \u003e\u003e\u003e sys.maxsize 9223372036854775807 5 The dir() Function The built-in function dir() is used to find out which names a module defines:\n\u003e\u003e\u003e import fibo, sys \u003e\u003e\u003e dir(fibo) ['__name__', 'fib', 'fib2'] \u003e\u003e\u003e dir(sys) ['__breakpointhook__', '__displayhook__', '__doc__', '__excepthook__', '__interactivehook__', '__loader__', '__name__', '__package__', '__spec__', '__stderr__', '__stdin__', '__stdout__', '__unraisablehook__', '_clear_type_cache', '_current_frames', '_debugmallocstats', '_framework', '_getframe', '_git', '_home', '_xoptions', 'abiflags', 'addaudithook', 'api_version', 'argv', 'audit', 'base_exec_prefix', 'base_prefix', 'breakpointhook', 'builtin_module_names', 'byteorder', 'call_tracing', 'callstats', 'copyright', 'displayhook', 'dont_write_bytecode', 'exc_info', 'excepthook', 'exec_prefix', 'executable', 'exit', 'flags', 'float_info', 'float_repr_style', 'get_asyncgen_hooks', 'get_coroutine_origin_tracking_depth', 'getallocatedblocks', 'getdefaultencoding', 'getdlopenflags', 'getfilesystemencodeerrors', 'getfilesystemencoding', 'getprofile', 'getrecursionlimit', 'getrefcount', 'getsizeof', 'getswitchinterval', 'gettrace', 'hash_info', 'hexversion', 'implementation', 'int_info', 'intern', 'is_finalizing', 'last_traceback', 'last_type', 'last_value', 'maxsize', 'maxunicode', 'meta_path', 'modules', 'path', 'path_hooks', 'path_importer_cache', 'platform', 'prefix', 'ps1', 'ps2', 'pycache_prefix', 'set_asyncgen_hooks', 'set_coroutine_origin_tracking_depth', 'setdlopenflags', 'setprofile', 'setrecursionlimit', 'setswitchinterval', 'settrace', 'stderr', 'stdin', 'stdout', 'thread_info', 'unraisablehook', 'version', 'version_info', 'warnoptions'] Without arguments, dir() lists the names you have defined currently:\n\u003e\u003e\u003e a = [1, 2, 3, 4, 5] \u003e\u003e\u003e import fibo \u003e\u003e\u003e fib = fibo.fib \u003e\u003e\u003e dir() ['__builtins__', '__name__', 'a', 'fib', 'fibo', 'sys'] Note that it lists all types of names: variables, modules, functions, etc.\n6 Packages Packages are a way of structuring Python’s module namespace by using “dotted module names”. For example, the module name A.B designates a submodule named B in a package named A.\nFor example: if we create a directory named “my_package”, then under it, we have two sub-directories “package1”, and “package2”, then we have two modules under each package:\nmy_package/ Top-level package ├── package1 Subpackage 1 │ ├── module1.py │ └── module2.py └── package2 Subpackage 2 ├── module1.py └── module2.py If we define a “hello” function in package1.module1:\ndef hello(): print(\"Hello from package 1 module 1\") We can start the Python interpreter under the directory where my_package is defined:\n\u003e\u003e\u003e from my_package.package1.module1 import hello \u003e\u003e\u003e hello() Hello from package 1 module 1 \u003e\u003e\u003e 6.1 Intra-package References When packages are structured into sub-packages (as with the “package1” package in the example), you can use absolute imports to refer to submodules of siblings packages. For example, if the code in module package1.module1 needs to use the package1.module2, it can use import module2:\n6.2 Packages in Multiple Directories If the code in package2.module1 wants to import package1.module1, write: import package1.module1.\nSummary Packages, modules, __main__, dir(), import… many details today. Make sure you practice!\nIn the next chapter, we will try to learn a little bit about input/output and error handling.\n","wordCount":"1240","inLanguage":"en","image":"https://www.guotiexin.com/1200px-Python-logo.png","datePublished":"2022-07-15T00:00:00Z","dateModified":"2022-07-15T00:00:00Z","author":{"@type":"Person","name":"IronCore"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.guotiexin.com/posts/python-07-code-organization/"},"publisher":{"@type":"Organization","name":"Tiexin Guo","logo":{"@type":"ImageObject","url":"https://www.guotiexin.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.guotiexin.com accesskey=h title="Tiexin Guo (Alt + H)">Tiexin Guo</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.guotiexin.com/about title=About><span>About</span></a></li><li><a href=https://cv.guotiexin.com/ title=CV><span>CV</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.guotiexin.com/portfolio title=Portfolio><span>Portfolio</span></a></li><li><a href=https://www.guotiexin.com/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://www.guotiexin.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://www.guotiexin.com/posts/ title=Archive><span>Archive</span></a></li><li><a href=https://github.com/ironcore864 title><span><i class='fab fa-github fa-fw'></i></span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Python Tutorial: 7. Modules - Organizing Code</h1><div class=post-meta><span title='2022-07-15 00:00:00 +0000 UTC'>July 15, 2022</span>&nbsp;·&nbsp;IronCore</div></header><figure class=entry-cover><img loading=lazy srcset="https://www.guotiexin.com/posts/python-07-code-organization/1200px-Python-logo_huea986c3c0480ed53a13b884e13868f01_125912_360x0_resize_box_3.png 360w ,https://www.guotiexin.com/posts/python-07-code-organization/1200px-Python-logo_huea986c3c0480ed53a13b884e13868f01_125912_480x0_resize_box_3.png 480w ,https://www.guotiexin.com/posts/python-07-code-organization/1200px-Python-logo_huea986c3c0480ed53a13b884e13868f01_125912_720x0_resize_box_3.png 720w ,https://www.guotiexin.com/posts/python-07-code-organization/1200px-Python-logo_huea986c3c0480ed53a13b884e13868f01_125912_1080x0_resize_box_3.png 1080w ,https://www.guotiexin.com/posts/python-07-code-organization/1200px-Python-logo_huea986c3c0480ed53a13b884e13868f01_125912_1500x0_resize_box_3.png 1500w ,https://www.guotiexin.com/posts/python-07-code-organization/1200px-Python-logo.png 3967w" sizes="(min-width: 768px) 720px, 100vw" src=https://www.guotiexin.com/posts/python-07-code-organization/1200px-Python-logo.png alt="Python Tutorial" width=3967 height=1493></figure><div class=post-content><h2 id=0-background>0 Background<a hidden class=anchor aria-hidden=true href=#0-background>#</a></h2><p>So far, we&rsquo;ve been coding in the Python interpreter, which if we quit and re-enter, the functions and variables definitions we&rsquo;ve made previously are lost.</p><p>Therefore, if you want to write a somewhat longer program, you&rsquo;d be better off using a text editor to prepare the input for the interpreter and running it with that file as input instead - which is known as creating a script.</p><p>As your program gets longer, you may want to split it into several files for easier maintenance. You may also want to use a handy function that you&rsquo;ve written in several programs without copying its definition into each program.</p><p>This is where the Python module kicks in.</p><hr><h2 id=1-module>1 Module<a hidden class=anchor aria-hidden=true href=#1-module>#</a></h2><p>A module is a file containing Python definitions and statements. The file name is the module name with the suffix <code>.py</code> appended. Within a module, the module&rsquo;s name (as a string) is available as the value of the global variable <code>__name__</code>.</p><p>Each file can be a module, and definitions from a module can be imported into other modules or the main module.</p><p>For instance, use your favorite text editor (VIM or VSCode?) to create a file called <code>fibo.py</code> in the current directory with the following contents:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>fib</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>    <span class=c1># write Fibonacci series up to n</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span><span class=p>,</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=n>a</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s1>&#39; &#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>a</span><span class=p>,</span> <span class=n>b</span> <span class=o>=</span> <span class=n>b</span><span class=p>,</span> <span class=n>a</span><span class=o>+</span><span class=n>b</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>fib2</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>   <span class=c1># return Fibonacci series up to n</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span><span class=p>,</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=n>a</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>a</span><span class=p>,</span> <span class=n>b</span> <span class=o>=</span> <span class=n>b</span><span class=p>,</span> <span class=n>a</span><span class=o>+</span><span class=n>b</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span>
</span></span></code></pre></div><p>Now if we start the Python interpreter from the directory where the <code>fibo.py</code> is located, we can import it and call the functions defined in it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>fibo</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>fibo</span><span class=o>.</span><span class=n>fib</span><span class=p>(</span><span class=mi>1000</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=mi>0</span> <span class=mi>1</span> <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span> <span class=mi>5</span> <span class=mi>8</span> <span class=mi>13</span> <span class=mi>21</span> <span class=mi>34</span> <span class=mi>55</span> <span class=mi>89</span> <span class=mi>144</span> <span class=mi>233</span> <span class=mi>377</span> <span class=mi>610</span> <span class=mi>987</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>fibo</span><span class=o>.</span><span class=n>fib2</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>13</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=mi>34</span><span class=p>,</span> <span class=mi>55</span><span class=p>,</span> <span class=mi>89</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>fibo</span><span class=o>.</span><span class=vm>__name__</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;fibo&#39;</span>
</span></span></code></pre></div><hr><h2 id=2-more-on-modules>2 More on Modules<a hidden class=anchor aria-hidden=true href=#2-more-on-modules>#</a></h2><p>A module can contain <em>executable statements</em> (besides function definitions.)</p><p>These statements are intended to initialize the module. They are executed <em>only the first time the module name is encountered in an import statement, and they are also run if the file is executed as a script.</em></p><p>Modules can import other modules.</p><p>It is customary (but not required) to place all import statements at the beginning of a module (or script, for that matter).</p><p>There is a variant of the <code>import</code> statement that imports certain names from a module only, directly, instead of importing the module:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span> <span class=nn>fibo</span> <span class=kn>import</span> <span class=n>fib</span><span class=p>,</span> <span class=n>fib2</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>fib</span><span class=p>(</span><span class=mi>500</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=mi>0</span> <span class=mi>1</span> <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span> <span class=mi>5</span> <span class=mi>8</span> <span class=mi>13</span> <span class=mi>21</span> <span class=mi>34</span> <span class=mi>55</span> <span class=mi>89</span> <span class=mi>144</span> <span class=mi>233</span> <span class=mi>377</span>
</span></span></code></pre></div><p>This does not introduce the module name (so in the example, <code>fibo</code> is not defined.)</p><p>There is even a variant to import all names that a module defines:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span> <span class=nn>fibo</span> <span class=kn>import</span> <span class=o>*</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>fib</span><span class=p>(</span><span class=mi>500</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=mi>0</span> <span class=mi>1</span> <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span> <span class=mi>5</span> <span class=mi>8</span> <span class=mi>13</span> <span class=mi>21</span> <span class=mi>34</span> <span class=mi>55</span> <span class=mi>89</span> <span class=mi>144</span> <span class=mi>233</span> <span class=mi>377</span>
</span></span></code></pre></div><p>The &ldquo;*&rdquo; means to import all names, but <em>do not use this</em> since it introduces an unknown set of names and causes poorly readable code. (It is okay to use it to save typing in interactive sessions, though.)</p><p>If the module name is followed by <code>as</code>, then it acts as if the name of the module is changed:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>fibo</span> <span class=k>as</span> <span class=nn>fib</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>fib</span><span class=o>.</span><span class=n>fib</span><span class=p>(</span><span class=mi>500</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=mi>0</span> <span class=mi>1</span> <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span> <span class=mi>5</span> <span class=mi>8</span> <span class=mi>13</span> <span class=mi>21</span> <span class=mi>34</span> <span class=mi>55</span> <span class=mi>89</span> <span class=mi>144</span> <span class=mi>233</span> <span class=mi>377</span>
</span></span></code></pre></div><p>This is effectively importing the module in the same way that import fibo will do, with the only difference of it being available as fib.</p><p>It can also be used when utilizing <code>from</code> with similar effects:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span> <span class=nn>fibo</span> <span class=kn>import</span> <span class=n>fib</span> <span class=k>as</span> <span class=n>fibonacci</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>fibonacci</span><span class=p>(</span><span class=mi>500</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=mi>0</span> <span class=mi>1</span> <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span> <span class=mi>5</span> <span class=mi>8</span> <span class=mi>13</span> <span class=mi>21</span> <span class=mi>34</span> <span class=mi>55</span> <span class=mi>89</span> <span class=mi>144</span> <span class=mi>233</span> <span class=mi>377</span>
</span></span></code></pre></div><hr><h2 id=3-executing-modules-as-scripts>3 Executing modules as scripts<a hidden class=anchor aria-hidden=true href=#3-executing-modules-as-scripts>#</a></h2><p>When you run a Python module with</p><p><code>python fibo.py &lt;arguments></code></p><p>the code in the module will be executed, just as if you imported it, but with the <code>__name__</code> set to &ldquo;<strong>main</strong>&rdquo; (instead of &lsquo;fibo&rsquo; which is the file/module name). That means that by adding this code at the end of your module:</p><pre tabindex=0><code>if __name__ == &#34;__main__&#34;:
    import sys
    fib(int(sys.argv[1]))
</code></pre><p>you can make the file usable as a script as well as an importable module because the code that parses the command line only runs if the module is executed as the “main” file:</p><pre tabindex=0><code>$ python fibo.py 50
0 1 1 2 3 5 8 13 21 34
</code></pre><p>If the module is imported, the code is not run:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>fibo</span>
</span></span></code></pre></div><p>This is often used either to provide a convenient user interface to a module, or for testing purposes (running the module as a script executes a test suite).</p><hr><h2 id=4-standard-modules>4 Standard Modules<a hidden class=anchor aria-hidden=true href=#4-standard-modules>#</a></h2><p>Python comes with a library of standard modules which provide access to operations that are not part of the core of the language but are nevertheless built in, either for efficiency or to provide access to operating system primitives such as system calls.</p><p>One particular module deserves some attention: <code>sys</code>, which is built into every Python interpreter:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>sys</span><span class=o>.</span><span class=n>maxsize</span>
</span></span><span class=line><span class=cl><span class=mi>9223372036854775807</span>
</span></span></code></pre></div><hr><h2 id=5-the-dir-function>5 The <code>dir()</code> Function<a hidden class=anchor aria-hidden=true href=#5-the-dir-function>#</a></h2><p>The built-in function <code>dir()</code> is used to find out which names a module defines:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>fibo</span><span class=o>,</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=nb>dir</span><span class=p>(</span><span class=n>fibo</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=s1>&#39;__name__&#39;</span><span class=p>,</span> <span class=s1>&#39;fib&#39;</span><span class=p>,</span> <span class=s1>&#39;fib2&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=nb>dir</span><span class=p>(</span><span class=n>sys</span><span class=p>)</span>  
</span></span><span class=line><span class=cl><span class=p>[</span><span class=s1>&#39;__breakpointhook__&#39;</span><span class=p>,</span> <span class=s1>&#39;__displayhook__&#39;</span><span class=p>,</span> <span class=s1>&#39;__doc__&#39;</span><span class=p>,</span> <span class=s1>&#39;__excepthook__&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;__interactivehook__&#39;</span><span class=p>,</span> <span class=s1>&#39;__loader__&#39;</span><span class=p>,</span> <span class=s1>&#39;__name__&#39;</span><span class=p>,</span> <span class=s1>&#39;__package__&#39;</span><span class=p>,</span> <span class=s1>&#39;__spec__&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;__stderr__&#39;</span><span class=p>,</span> <span class=s1>&#39;__stdin__&#39;</span><span class=p>,</span> <span class=s1>&#39;__stdout__&#39;</span><span class=p>,</span> <span class=s1>&#39;__unraisablehook__&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;_clear_type_cache&#39;</span><span class=p>,</span> <span class=s1>&#39;_current_frames&#39;</span><span class=p>,</span> <span class=s1>&#39;_debugmallocstats&#39;</span><span class=p>,</span> <span class=s1>&#39;_framework&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;_getframe&#39;</span><span class=p>,</span> <span class=s1>&#39;_git&#39;</span><span class=p>,</span> <span class=s1>&#39;_home&#39;</span><span class=p>,</span> <span class=s1>&#39;_xoptions&#39;</span><span class=p>,</span> <span class=s1>&#39;abiflags&#39;</span><span class=p>,</span> <span class=s1>&#39;addaudithook&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;api_version&#39;</span><span class=p>,</span> <span class=s1>&#39;argv&#39;</span><span class=p>,</span> <span class=s1>&#39;audit&#39;</span><span class=p>,</span> <span class=s1>&#39;base_exec_prefix&#39;</span><span class=p>,</span> <span class=s1>&#39;base_prefix&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;breakpointhook&#39;</span><span class=p>,</span> <span class=s1>&#39;builtin_module_names&#39;</span><span class=p>,</span> <span class=s1>&#39;byteorder&#39;</span><span class=p>,</span> <span class=s1>&#39;call_tracing&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;callstats&#39;</span><span class=p>,</span> <span class=s1>&#39;copyright&#39;</span><span class=p>,</span> <span class=s1>&#39;displayhook&#39;</span><span class=p>,</span> <span class=s1>&#39;dont_write_bytecode&#39;</span><span class=p>,</span> <span class=s1>&#39;exc_info&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;excepthook&#39;</span><span class=p>,</span> <span class=s1>&#39;exec_prefix&#39;</span><span class=p>,</span> <span class=s1>&#39;executable&#39;</span><span class=p>,</span> <span class=s1>&#39;exit&#39;</span><span class=p>,</span> <span class=s1>&#39;flags&#39;</span><span class=p>,</span> <span class=s1>&#39;float_info&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;float_repr_style&#39;</span><span class=p>,</span> <span class=s1>&#39;get_asyncgen_hooks&#39;</span><span class=p>,</span> <span class=s1>&#39;get_coroutine_origin_tracking_depth&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;getallocatedblocks&#39;</span><span class=p>,</span> <span class=s1>&#39;getdefaultencoding&#39;</span><span class=p>,</span> <span class=s1>&#39;getdlopenflags&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;getfilesystemencodeerrors&#39;</span><span class=p>,</span> <span class=s1>&#39;getfilesystemencoding&#39;</span><span class=p>,</span> <span class=s1>&#39;getprofile&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;getrecursionlimit&#39;</span><span class=p>,</span> <span class=s1>&#39;getrefcount&#39;</span><span class=p>,</span> <span class=s1>&#39;getsizeof&#39;</span><span class=p>,</span> <span class=s1>&#39;getswitchinterval&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;gettrace&#39;</span><span class=p>,</span> <span class=s1>&#39;hash_info&#39;</span><span class=p>,</span> <span class=s1>&#39;hexversion&#39;</span><span class=p>,</span> <span class=s1>&#39;implementation&#39;</span><span class=p>,</span> <span class=s1>&#39;int_info&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;intern&#39;</span><span class=p>,</span> <span class=s1>&#39;is_finalizing&#39;</span><span class=p>,</span> <span class=s1>&#39;last_traceback&#39;</span><span class=p>,</span> <span class=s1>&#39;last_type&#39;</span><span class=p>,</span> <span class=s1>&#39;last_value&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;maxsize&#39;</span><span class=p>,</span> <span class=s1>&#39;maxunicode&#39;</span><span class=p>,</span> <span class=s1>&#39;meta_path&#39;</span><span class=p>,</span> <span class=s1>&#39;modules&#39;</span><span class=p>,</span> <span class=s1>&#39;path&#39;</span><span class=p>,</span> <span class=s1>&#39;path_hooks&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;path_importer_cache&#39;</span><span class=p>,</span> <span class=s1>&#39;platform&#39;</span><span class=p>,</span> <span class=s1>&#39;prefix&#39;</span><span class=p>,</span> <span class=s1>&#39;ps1&#39;</span><span class=p>,</span> <span class=s1>&#39;ps2&#39;</span><span class=p>,</span> <span class=s1>&#39;pycache_prefix&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;set_asyncgen_hooks&#39;</span><span class=p>,</span> <span class=s1>&#39;set_coroutine_origin_tracking_depth&#39;</span><span class=p>,</span> <span class=s1>&#39;setdlopenflags&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;setprofile&#39;</span><span class=p>,</span> <span class=s1>&#39;setrecursionlimit&#39;</span><span class=p>,</span> <span class=s1>&#39;setswitchinterval&#39;</span><span class=p>,</span> <span class=s1>&#39;settrace&#39;</span><span class=p>,</span> <span class=s1>&#39;stderr&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;stdin&#39;</span><span class=p>,</span> <span class=s1>&#39;stdout&#39;</span><span class=p>,</span> <span class=s1>&#39;thread_info&#39;</span><span class=p>,</span> <span class=s1>&#39;unraisablehook&#39;</span><span class=p>,</span> <span class=s1>&#39;version&#39;</span><span class=p>,</span> <span class=s1>&#39;version_info&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;warnoptions&#39;</span><span class=p>]</span>
</span></span></code></pre></div><p>Without arguments, <code>dir()</code> lists the names you have defined currently:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>fibo</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>fib</span> <span class=o>=</span> <span class=n>fibo</span><span class=o>.</span><span class=n>fib</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=nb>dir</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=s1>&#39;__builtins__&#39;</span><span class=p>,</span> <span class=s1>&#39;__name__&#39;</span><span class=p>,</span> <span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;fib&#39;</span><span class=p>,</span> <span class=s1>&#39;fibo&#39;</span><span class=p>,</span> <span class=s1>&#39;sys&#39;</span><span class=p>]</span>
</span></span></code></pre></div><blockquote><p>Note that it lists all types of names: variables, modules, functions, etc.</p></blockquote><hr><h2 id=6-packages>6 Packages<a hidden class=anchor aria-hidden=true href=#6-packages>#</a></h2><p>Packages are a way of structuring Python&rsquo;s module namespace by using “dotted module names”. For example, the module name <code>A.B</code> designates a submodule named <code>B</code> in a package named <code>A</code>.</p><p>For example: if we create a directory named &ldquo;my_package&rdquo;, then under it, we have two sub-directories &ldquo;package1&rdquo;, and &ldquo;package2&rdquo;, then we have two modules under each package:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>my_package/                     Top-level package
</span></span><span class=line><span class=cl>├── package1                    Subpackage <span class=m>1</span>
</span></span><span class=line><span class=cl>│   ├── module1.py
</span></span><span class=line><span class=cl>│   └── module2.py
</span></span><span class=line><span class=cl>└── package2                    Subpackage <span class=m>2</span>
</span></span><span class=line><span class=cl>    ├── module1.py
</span></span><span class=line><span class=cl>    └── module2.py
</span></span></code></pre></div><p>If we define a &ldquo;hello&rdquo; function in package1.module1:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>hello</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Hello from package 1 module 1&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>We can start the Python interpreter under the directory where my_package is defined:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span> <span class=nn>my_package.package1.module1</span> <span class=kn>import</span> <span class=n>hello</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>hello</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Hello</span> <span class=kn>from</span> <span class=nn>package</span> <span class=mi>1</span> <span class=n>module</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span></code></pre></div><h3 id=61-intra-package-references>6.1 Intra-package References<a hidden class=anchor aria-hidden=true href=#61-intra-package-references>#</a></h3><p>When packages are structured into sub-packages (as with the &ldquo;package1&rdquo; package in the example), you can use <em>absolute</em> imports to refer to submodules of siblings packages. For example, if the code in module <code>package1.module1</code> needs to use the <code>package1.module2</code>, it can use <code>import module2</code>:</p><h3 id=62-packages-in-multiple-directories>6.2 Packages in Multiple Directories<a hidden class=anchor aria-hidden=true href=#62-packages-in-multiple-directories>#</a></h3><p>If the code in <code>package2.module1</code> wants to import <code>package1.module1</code>, write: <code>import package1.module1</code>.</p><hr><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2><p>Packages, modules, <code>__main__</code>, <code>dir()</code>, <code>import</code>&mldr; many details today. Make sure you practice!</p><p>In the next chapter, we will try to learn a little bit about input/output and error handling.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.guotiexin.com/tags/python/>python</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://www.guotiexin.com>Tiexin Guo</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>