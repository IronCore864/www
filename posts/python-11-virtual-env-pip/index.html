<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Python Tutorial: 11. Virtual Environments and Managing Packages with Pip | Tiexin Guo</title><meta name=keywords content="python"><meta name=description content="Python apps and programs will often use packages and modules that don&rsquo;t come as part of the standard library (stuff that is included in Python).
Apps will sometimes need a specific version of a library, because the app may require that a particular bug has been fixed or the app may be written using an obsolete version of the library&rsquo;s interface.
This means it may not be possible for one Python installation to meet the requirements of every project."><meta name=author content="IronCore"><link rel=canonical href=https://www.guotiexin.com/posts/python-11-virtual-env-pip/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.guotiexin.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.guotiexin.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.guotiexin.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.guotiexin.com/apple-touch-icon.png><link rel=mask-icon href=https://www.guotiexin.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Python Tutorial: 11. Virtual Environments and Managing Packages with Pip"><meta property="og:description" content="Python apps and programs will often use packages and modules that don&rsquo;t come as part of the standard library (stuff that is included in Python).
Apps will sometimes need a specific version of a library, because the app may require that a particular bug has been fixed or the app may be written using an obsolete version of the library&rsquo;s interface.
This means it may not be possible for one Python installation to meet the requirements of every project."><meta property="og:type" content="article"><meta property="og:url" content="https://www.guotiexin.com/posts/python-11-virtual-env-pip/"><meta property="og:image" content="https://www.guotiexin.com/1200px-Python-logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-21T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-21T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.guotiexin.com/1200px-Python-logo.png"><meta name=twitter:title content="Python Tutorial: 11. Virtual Environments and Managing Packages with Pip"><meta name=twitter:description content="Python apps and programs will often use packages and modules that don&rsquo;t come as part of the standard library (stuff that is included in Python).
Apps will sometimes need a specific version of a library, because the app may require that a particular bug has been fixed or the app may be written using an obsolete version of the library&rsquo;s interface.
This means it may not be possible for one Python installation to meet the requirements of every project."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.guotiexin.com/posts/"},{"@type":"ListItem","position":3,"name":"Python Tutorial: 11. Virtual Environments and Managing Packages with Pip","item":"https://www.guotiexin.com/posts/python-11-virtual-env-pip/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Python Tutorial: 11. Virtual Environments and Managing Packages with Pip","name":"Python Tutorial: 11. Virtual Environments and Managing Packages with Pip","description":"Python apps and programs will often use packages and modules that don\u0026rsquo;t come as part of the standard library (stuff that is included in Python).\nApps will sometimes need a specific version of a library, because the app may require that a particular bug has been fixed or the app may be written using an obsolete version of the library\u0026rsquo;s interface.\nThis means it may not be possible for one Python installation to meet the requirements of every project.","keywords":["python"],"articleBody":"Python apps and programs will often use packages and modules that don’t come as part of the standard library (stuff that is included in Python).\nApps will sometimes need a specific version of a library, because the app may require that a particular bug has been fixed or the app may be written using an obsolete version of the library’s interface.\nThis means it may not be possible for one Python installation to meet the requirements of every project. If project A needs version 1.0 of a particular module but project B needs version 2.0, the requirements conflict, and installing either version 1.0 or 2.0 will leave one app unable to run.\nThe solution for this problem is to create a virtual environment: a self-contained directory tree that contains a Python installation for a particular version of Python, plus several additional packages.\nDifferent projects and apps and programs can then use different virtual environments.\nTo resolve the earlier example of conflicting requirements, project A can have its virtual environment with version 1.0 installed while project B has another virtual environment with version 2.0. If project B requires a library to be upgraded to version 3.0, this will not affect project A’s environment.\n1 Creating a Virtual ENV There are multiple choices for creating a virtual environment in Python.\nThe most famous ones probably are:\nvirtualenv venv We choose venv here because it’s shipped with Python 3 already.\nTo create a virtual environment, decide upon a directory where you want to place it, and run the venv module as a script with the directory path:\npython3 -m venv .venv This will create the .venv (doesn’t have to be this name, usually people would use venv or .venv or virtualenv or something similar) directory if it doesn’t exist, and also create directories inside it containing a copy of the Python interpreter and various supporting files.\n.venv is a common directory location for a virtual environment because this name keeps the directory hidden.\nOnce you’ve created a virtual environment, you may activate it.\nsource .venv/bin/activate # or . .venv/bin/activate # the first dot works as the source command Activating the virtual environment will change your shell’s prompt to show what virtual environment you’re using, and modify the environment so that running python will get you that particular version and installation of Python. For example:\ntiexin@mbp ~/work/test $ . .venv/bin/activate (.venv) tiexin@mbp ~/work/test $ 2 Managing Packages and Dependencies with Pip You can install, upgrade, and remove packages using a program called pip.\npip has many subcommands: “install”, “uninstall”, “freeze”, etc.\nYou can install the latest version of a package by specifying a package’s name:\n(.venv) tiexin@mbp ~/work/test $ pip install novas Collecting novas Downloading novas-3.1.1.5.tar.gz (135 kB) ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 135.3/135.3 kB 1.3 MB/s eta 0:00:00 Preparing metadata (setup.py) ... done Using legacy 'setup.py install' for novas, since package 'wheel' is not installed. Installing collected packages: novas Running setup.py install for novas ... done Successfully installed novas-3.1.1.5 If you re-run this command, pip will notice that the requested version is already installed and do nothing.\nSome useful commands of pip:\npip uninstall followed by one or more package names will remove the packages from the virtual environment. pip show will display information about a particular package: pip list will display all of the packages installed in the virtual environment: pip freeze will produce a similar list of the installed packages, but the output uses the format that pip install expects. A common convention is to put this list in a requirements.txt file: (.venv) tiexin@mbp ~/work/test $ pip freeze \u003e requiremenets.txt (.venv) tiexin@mbp ~/work/test $ cat requiremenets.txt novas==3.1.1.5 (.venv) tiexin@mbp ~/work/test $ pip install -r requiremenets.txt Requirement already satisfied: novas==3.1.1.5 in ./.venv/lib/python3.9/site-packages (from -r requiremenets.txt (line 1)) (3.1.1.5). Conventionally, we name the file requirements.txt. Other users can use your requirements.txt file to install all necessary packages:\n(.venv) $ python -m pip install -r requirements.txt Summary This section is useful when you create multiple projects and don’t want them to interfere with each other. It’s also a good practice to always use a virtual environment (instead of the default Python interpreter that comes with your macOS by default.)\nIn the next chapter, we will look at a real-world example to put all we learned together.\n","wordCount":"708","inLanguage":"en","image":"https://www.guotiexin.com/1200px-Python-logo.png","datePublished":"2022-07-21T00:00:00Z","dateModified":"2022-07-21T00:00:00Z","author":{"@type":"Person","name":"IronCore"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.guotiexin.com/posts/python-11-virtual-env-pip/"},"publisher":{"@type":"Organization","name":"Tiexin Guo","logo":{"@type":"ImageObject","url":"https://www.guotiexin.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.guotiexin.com accesskey=h title="Tiexin Guo (Alt + H)">Tiexin Guo</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.guotiexin.com/about title=About><span>About</span></a></li><li><a href=https://cv.guotiexin.com/ title=CV><span>CV</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.guotiexin.com/portfolio title=Portfolio><span>Portfolio</span></a></li><li><a href=https://www.guotiexin.com/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://www.guotiexin.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://www.guotiexin.com/posts/ title=Archive><span>Archive</span></a></li><li><a href=https://github.com/ironcore864 title><span><i class='fab fa-github fa-fw'></i></span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Python Tutorial: 11. Virtual Environments and Managing Packages with Pip</h1><div class=post-meta><span title='2022-07-21 00:00:00 +0000 UTC'>July 21, 2022</span>&nbsp;·&nbsp;IronCore</div></header><figure class=entry-cover><img loading=lazy srcset="https://www.guotiexin.com/posts/python-11-virtual-env-pip/1200px-Python-logo_hu8561a7ed8a8e5d63c7e07aa4b5b816c6_122862_360x0_resize_box_3.png 360w ,https://www.guotiexin.com/posts/python-11-virtual-env-pip/1200px-Python-logo_hu8561a7ed8a8e5d63c7e07aa4b5b816c6_122862_480x0_resize_box_3.png 480w ,https://www.guotiexin.com/posts/python-11-virtual-env-pip/1200px-Python-logo_hu8561a7ed8a8e5d63c7e07aa4b5b816c6_122862_720x0_resize_box_3.png 720w ,https://www.guotiexin.com/posts/python-11-virtual-env-pip/1200px-Python-logo_hu8561a7ed8a8e5d63c7e07aa4b5b816c6_122862_1080x0_resize_box_3.png 1080w ,https://www.guotiexin.com/posts/python-11-virtual-env-pip/1200px-Python-logo_hu8561a7ed8a8e5d63c7e07aa4b5b816c6_122862_1500x0_resize_box_3.png 1500w ,https://www.guotiexin.com/posts/python-11-virtual-env-pip/1200px-Python-logo.png 3967w" sizes="(min-width: 768px) 720px, 100vw" src=https://www.guotiexin.com/posts/python-11-virtual-env-pip/1200px-Python-logo.png alt="Python Tutorial" width=3967 height=1493></figure><div class=post-content><p>Python apps and programs will often use packages and modules that don&rsquo;t come as part of the standard library (stuff that is included in Python).</p><p>Apps will sometimes need a specific version of a library, because the app may require that a particular bug has been fixed or the app may be written using an obsolete version of the library&rsquo;s interface.</p><p>This means it may not be possible for one Python installation to meet the requirements of every project. If project A needs version 1.0 of a particular module but project B needs version 2.0, the requirements conflict, and installing either version 1.0 or 2.0 will leave one app unable to run.</p><p>The solution for this problem is to create a <em>virtual environment</em>: a self-contained directory tree that contains a Python installation for a particular version of Python, plus several additional packages.</p><p>Different projects and apps and programs can then use different virtual environments.</p><p>To resolve the earlier example of conflicting requirements, project A can have its virtual environment with version 1.0 installed while project B has another virtual environment with version 2.0. If project B requires a library to be upgraded to version 3.0, this will not affect project A&rsquo;s environment.</p><h2 id=1-creating-a-virtual-env>1 Creating a Virtual ENV<a hidden class=anchor aria-hidden=true href=#1-creating-a-virtual-env>#</a></h2><p>There are multiple choices for creating a virtual environment in Python.</p><p>The most famous ones probably are:</p><ul><li><code>virtualenv</code></li><li><code>venv</code></li></ul><p>We choose <code>venv</code> here because it&rsquo;s shipped with Python 3 already.</p><p>To create a virtual environment, decide upon a directory where you want to place it, and run the <code>venv</code> module as a script with the directory path:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python3 -m venv .venv
</span></span></code></pre></div><p>This will create the <code>.venv</code> (doesn&rsquo;t have to be this name, usually people would use <code>venv</code> or <code>.venv</code> or <code>virtualenv</code> or something similar) directory if it doesn&rsquo;t exist, and also create directories inside it containing a copy of the Python interpreter and various supporting files.</p><p><code>.venv</code> is a common directory location for a virtual environment because this name keeps the directory hidden.</p><p>Once you&rsquo;ve created a virtual environment, you may activate it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>source</span> .venv/bin/activate
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl>. .venv/bin/activate
</span></span><span class=line><span class=cl><span class=c1># the first dot works as the source command</span>
</span></span></code></pre></div><p>Activating the virtual environment will change your shell&rsquo;s prompt to show what virtual environment you&rsquo;re using, and modify the environment so that running python will get you that particular version and installation of Python. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tiexin@mbp ~/work/test $ . .venv/bin/activate
</span></span><span class=line><span class=cl><span class=o>(</span>.venv<span class=o>)</span> tiexin@mbp ~/work/test $
</span></span></code></pre></div><hr><h2 id=2-managing-packages-and-dependencies-with-pip>2 Managing Packages and Dependencies with Pip<a hidden class=anchor aria-hidden=true href=#2-managing-packages-and-dependencies-with-pip>#</a></h2><p>You can install, upgrade, and remove packages using a program called <code>pip</code>.</p><p><code>pip</code> has many subcommands: “install”, “uninstall”, “freeze”, etc.</p><p>You can install the latest version of a package by specifying a package&rsquo;s name:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>.venv<span class=o>)</span> tiexin@mbp ~/work/test $ pip install novas
</span></span><span class=line><span class=cl>Collecting novas
</span></span><span class=line><span class=cl>  Downloading novas-3.1.1.5.tar.gz <span class=o>(</span><span class=m>135</span> kB<span class=o>)</span>
</span></span><span class=line><span class=cl>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 135.3/135.3 kB 1.3 MB/s eta 0:00:00
</span></span><span class=line><span class=cl>  Preparing metadata <span class=o>(</span>setup.py<span class=o>)</span> ... <span class=k>done</span>
</span></span><span class=line><span class=cl>Using legacy <span class=s1>&#39;setup.py install&#39;</span> <span class=k>for</span> novas, since package <span class=s1>&#39;wheel&#39;</span> is not installed.
</span></span><span class=line><span class=cl>Installing collected packages: novas
</span></span><span class=line><span class=cl>  Running setup.py install <span class=k>for</span> novas ... <span class=k>done</span>
</span></span><span class=line><span class=cl>Successfully installed novas-3.1.1.5
</span></span></code></pre></div><p>If you re-run this command, <code>pip</code> will notice that the requested version is already installed and do nothing.</p><p>Some useful commands of <code>pip</code>:</p><ul><li><code>pip uninstall</code> followed by one or more package names will remove the packages from the virtual environment.</li><li><code>pip show</code> will display information about a particular package:</li><li><code>pip list</code> will display all of the packages installed in the virtual environment:</li><li><code>pip freeze</code> will produce a similar list of the installed packages, but the output uses the format that pip install expects. A common convention is to put this list in a <code>requirements.txt</code> file:</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>.venv<span class=o>)</span> tiexin@mbp ~/work/test $ pip freeze &gt; requiremenets.txt
</span></span><span class=line><span class=cl><span class=o>(</span>.venv<span class=o>)</span> tiexin@mbp ~/work/test $ cat requiremenets.txt
</span></span><span class=line><span class=cl><span class=nv>novas</span><span class=o>==</span>3.1.1.5
</span></span><span class=line><span class=cl><span class=o>(</span>.venv<span class=o>)</span> tiexin@mbp ~/work/test $ pip install -r requiremenets.txt
</span></span><span class=line><span class=cl>Requirement already satisfied: <span class=nv>novas</span><span class=o>==</span>3.1.1.5 in ./.venv/lib/python3.9/site-packages <span class=o>(</span>from -r requiremenets.txt <span class=o>(</span>line 1<span class=o>))</span> <span class=o>(</span>3.1.1.5<span class=o>)</span>.
</span></span></code></pre></div><p>Conventionally, we name the file <code>requirements.txt</code>. Other users can use your <code>requirements.txt</code> file to install all necessary packages:</p><pre tabindex=0><code>(.venv) $ python -m pip install -r requirements.txt
</code></pre><hr><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2><p>This section is useful when you create multiple projects and don&rsquo;t want them to interfere with each other. It&rsquo;s also a good practice to always use a virtual environment (instead of the default Python interpreter that comes with your macOS by default.)</p><p>In the next chapter, we will look at a real-world example to put all we learned together.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.guotiexin.com/tags/python/>python</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://www.guotiexin.com>Tiexin Guo</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>