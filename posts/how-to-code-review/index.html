<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>A Brief Introduction to Code Review: Everything You Want to Know | Tiexin Guo</title><meta name=keywords content="how-to,code review,open-source,github"><meta name=description content="A Brief Introduction to Code Review: How-To Review GitHub Open-Source Code (And Everything Else)"><meta name=author content="Tiexin Guo | 郭铁心"><link rel=canonical href=https://www.guotiexin.com/posts/how-to-code-review/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.guotiexin.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.guotiexin.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.guotiexin.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.guotiexin.com/apple-touch-icon.png><link rel=mask-icon href=https://www.guotiexin.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="A Brief Introduction to Code Review: Everything You Want to Know"><meta property="og:description" content="A Brief Introduction to Code Review: How-To Review GitHub Open-Source Code (And Everything Else)"><meta property="og:type" content="article"><meta property="og:url" content="https://www.guotiexin.com/posts/how-to-code-review/"><meta property="og:image" content="https://www.guotiexin.com/mountain.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-06T00:00:00+00:00"><meta property="article:modified_time" content="2022-06-06T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.guotiexin.com/mountain.jpg"><meta name=twitter:title content="A Brief Introduction to Code Review: Everything You Want to Know"><meta name=twitter:description content="A Brief Introduction to Code Review: How-To Review GitHub Open-Source Code (And Everything Else)"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.guotiexin.com/posts/"},{"@type":"ListItem","position":3,"name":"A Brief Introduction to Code Review: Everything You Want to Know","item":"https://www.guotiexin.com/posts/how-to-code-review/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"A Brief Introduction to Code Review: Everything You Want to Know","name":"A Brief Introduction to Code Review: Everything You Want to Know","description":"A Brief Introduction to Code Review: How-To Review GitHub Open-Source Code (And Everything Else)","keywords":["how-to","code review","open-source","github"],"articleBody":"This is Tiexin Guo, DevStream PMC Chair (an open-source DevOps project with an enthusiastic community.)\nAnd today, we are going to talk about code review.\nSpecifically, we are going to talk about:\nwhy do we need to do code reviews how to review; how to do code review on GitHub how to review for open-source projects But if you want to get acquainted with some best practices for reviewing code of any kind (closed-source projects, on GitLab, etc.,) please do read on, because the principles and methodologies are universal.\nWithout further adieu, let’s get started.\n1 Why Do We Need to Do Code Review? I know you might already have a question in your head even before reading the title of this post: why do we need to do a code review?\nAn excellent question, indeed. Because once you feed the code into a compiler, the result will always be the same. Why on earth do we need to bother reviewing code and writing clean code, anyway?\nBecause code is for humans to read, not for machines to run.\n“Clean or not” makes no difference to a machine, but it makes all the difference for humankind. Cleaner code is much easier to organize, refactor, add new features into, debug, to …\nAdding a new feature into a bad codebase could easily cost 100x the time compared to a clean codebase. If it’s possible at all.\nSo, the answer is easy: code review is for code quality.\n2 Why Not Using Tools and Automation for Code Quality? There are already a bunch of tools or third-party services which can help you to evaluate the quality of a piece of code (don’t ask me how I knew this.)\nFor example, GitHub already showed how many lines of code changes there are in a PR. There are tools to tell you what is a “big” function, a “large” file; how many “big” functions and “large” files you’ve got in your repo; their percentage; etc.\nBut hey, you can invent a million metrics, and they are still only “indicators” of code quality; they don’t “define” good code.\nFor example, in my previous company, we used an in-house tool that would check if the length of a function exceeds 50 lines of code. Why 50? why not 40, or 60? If it’s 51, is it “clean”? If not, how about I delete a necessary empty line intended for separating two blocks? How about I delete a necessary comment?\nNo metric is perfect, and there are a bunch of ways to hack it and bypass it.\nThe only golden standard of code quality is for humans to review. Because code is meant to be read by humans.\n3 Code Review: What Are the Standards? Once we’ve figured out why we need to do it, we need to answer this not-so-technical question: what kind of code needs to be refactored? What kind of code needs to be rewritten? What can be merged? Anyway, what standard should I use?\nI know what you are thinking, and you are right: for code with obvious bugs and errors, you can’t merge’em. This isn’t in the scope of our discussion.\nHow about code that runs properly, does what needs to be done, but has a few “defects,” like “missing necessary comments,” or “not easy to read/understand?”\n3.1 New Contributors I’d like to make it clear: for new contributors, it’s absolutely fine if they didn’t meet your standard (in the beginning.)\nFor new contributors, it’s key to let them feel they are welcome, and there isn’t much that hinders their contribution. Easy to understand: if it’s extremely difficult to contribute, they won’t. So, the thing is: don’t let new contributors feel frustrated. We need to make the process as welcoming as possible for newcomers. Nothing is more important than letting new contributors feel easy and welcome.\nBut, this isn’t to say that we tolerate “dirty” code. If a new contributor made a commit that isn’t perfect to your standard, guiding them and helping them to learn is the best way, and we should do it encouragingly. They will learn and next time they won’t make the same mistakes again. We can even lead by examples, and give them sample code snippets, or even create another improvement commit and let them know.\n3.2 Senior Members For senior contributors and members, we intend to keep the quality high.\nIt’s not enough if a PR merely does what it’s supposed to. The readability should be fine, too. Evidently, a quick review reduces the time of code review and we could release a new feature quickly, but in the long run, careless reviews would give us a run for our money: as code quality decreases, it would take longer and longer to do even the most simple task.\nTo sum up, we should:\nkeep it simple and welcoming for new contributors; keep the bar high for ourselves, core developers, and community members. 4 Working in an Open-Source Project Last month, 3 more contributors joined the DevStream community. Circled (or to be precise, rectangulared) in red:\nNow, we have seven active members in total. Plus, we’ve also got c.a. 20 external contributors. Yep, that’s not a typo; you read it right: we’ve got more than 20 contributors, already.\nAs a leader in an open-source project, it’s not easy managing an open-source project, coding, reviewing all those pull requests (PR) from the community every day, AND still having a life (don’t ask me how I knew this.)\nI guess this isn’t uncommon for many project leads. Yes, you need to manage priorities properly and get things done, but there is a line when you simply have too many things to do and can’t finish them all.\nTime to have a “reviewers” group and start “group” reviews! Simple answer, isn’t it?\nBut how?\nWhat’s the process? What’s the standard? Any tricks to speed it up while keeping the quality high in the air? A million questions to be answered.\nOK, let’s try to tackle some of the important ones in this blog post.\n5 Taking up a Code Review Task Let’s do a code review, now.\nBefore start reviewing anything, let’s accept a quest first.\nWhy do we need to do this? I’m glad you asked.\nThe open-source community works asynchronously. That is to say, they don’t do too much live communication, like phone calls, video meetings, or even offline, face-to-face meetings. Instead, they rely heavily on messages (by using instant message tools, but probably not reading them instantly) and emails. You need to let other people know that you are on this task so that others won’t do the same thing.\nEven if you are not in an open-source project, for example, in a closed-source, internal project with a team sitting together around the table, it’s also nice to let others know that “hey guys, I’ll work on this, please don’t do duplicated work.”\nOK, then how to mark a task as yours?\nIf you are already the reviewer of a PR, the “Reviewers” section will show your avatar, and there will be some hint in the yellow bar saying that “This pull request is waiting on your review.” There is also a green button “Add your review.” Click this button to start a reviewing process.\nThen how to become a “reviewer”?\nEasy question (and not easy at the same time:)\nSince you are a reviewer, you have permission to click the gear “⚙️” icon to assign a reviewer (for example, yourself.) But if you are not a legit reviewer yet, you should become a reviewer first.\n6 GitHub Code Review Walk-Through Click the “Add your review” button and we will be directed to the Code Review page:\nHere, we have a few features worth exploring:\nthe “file tree” on the left file filter the “Viewed” checkbox for each file the “…” button Once you’ve gotten familiar with all of those quirks and features, your code review life quality will be greatly improved.\nTo read more details about these, check out the official doc here. Explore on. I’ll wait for you to finish that doc first.\nFor simple code changes, it’s more than enough to view the code diff on the code review web page. Example:\nWe could easily tell if this change makes sense or not (hint: No. Missing comma. Try to find it :) If it’s fixed, we can approve it:\n7 Reviewing a PR Locally For more complicated PRs, if the author also didn’t include any screenshot of the test they had run (see this example here,） it’s better to check out the code locally and review it with the help of an IDE.\nTake this PR for example: pr #641. To download this PR locally, let’s execute:\ngit fetch upstream pull/641/head:pr641 git checkout pr641 Results:\nThen we simply start our IDE and read the code there:\nIn IDE, it’s much easier to spot possible mistakes (like missing a comma.) And, you can also build, test, and run it locally to see if it passes the unit tests and even integration tests.\nYou might think this is redundant because a PR might have triggered a CI process already:\nBut hey, not all CI workflows are born equally. For example, not all CI workflows would run integration tests. So, testing a PR locally is still necessary for bigger PRs and for more complicated changes, to do a quick regression.\nSo far, you can fully understand what a PR has changed.\n8 Committing to Somebody Else’s PR A general rule of thumb: don’t.\nIf you want to do it very badly, rethink your intention. Ask yourself: do you have to do this?\nNormally, it’s not recommended to commit to other people’s work directly. It’s not respectful to the original author, and it’s complicated (especially if the original author needs to add another commit.)\nBut, rules are to be broken. Like every other single rule in the world, there are exceptions to this rule.\nTaking this PR for an example:\nIt’s from a new contributor. We don’t want to make “contributing to the project” too hard, which would shut the door and scare too many potential contributors away.\nPlus, this PR isn’t simple enough to get it 100% right. It seems easy, but to make it perfect, you’d need to know all dtm sub-commands, which certainly is a high bar to cross for a first-time contributor.\nThat’s why we added another commit to improve his work (important: and also let him know about it,) and included the test result:\nHow to do this exactly?\nLocal Commit Make changes, then commit:\ngit add xxx git commit -m \"bug: yyy\" Find the PR Source Branch We can find out from which branch this PR comes from:\nNow we see the “fork” info, like:\nThen we can add a new remote:\ngit remote add himku git@github.com:himku/devstream.git remote: himku(git@github.com:himku/devstream.git) branch: fix-issue-559 Then we push to it:\ngit push himku HEAD:fix-issue-559 Cool, right? But again: rethink before you want to do this; because more often than not, you don’t necessarily want to do it.\n9 Summary Read more if you are interested:\nGoogle’s Code Review Developer Guide If you like this article, please bookmark our DevStream blog and my personal blog. We are also on Medium and Dev.to. Here are the links for you:\nDevStream blog: https://blog.devstream.io Tiexin’s blog: https://www.guotiexin.com DevStream Medium: https://medium.com/devstream Tiexin’s Medium: https://medium.com/@IronCore864 DevStream Dev.to: https://dev.to/devstream Tiexin’s Dev.to: https://dev.to/ironcore864/ See you in the next article.\n","wordCount":"1935","inLanguage":"en","image":"https://www.guotiexin.com/mountain.jpg","datePublished":"2022-06-06T00:00:00Z","dateModified":"2022-06-06T00:00:00Z","author":{"@type":"Person","name":"Tiexin Guo | 郭铁心"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.guotiexin.com/posts/how-to-code-review/"},"publisher":{"@type":"Organization","name":"Tiexin Guo","logo":{"@type":"ImageObject","url":"https://www.guotiexin.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.guotiexin.com accesskey=h title="Tiexin Guo (Alt + H)">Tiexin Guo</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.guotiexin.com/about title=About><span>About</span></a></li><li><a href=https://cv.guotiexin.com/ title=CV><span>CV</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.guotiexin.com/portfolio title=Portfolio><span>Portfolio</span></a></li><li><a href=https://www.guotiexin.com/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://www.guotiexin.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://www.guotiexin.com/posts/ title=Archive><span>Archive</span></a></li><li><a href=https://github.com/ironcore864 title><span><i class='fab fa-github fa-fw'></i></span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>A Brief Introduction to Code Review: Everything You Want to Know</h1><div class=post-description>A Brief Introduction to Code Review: How-To Review GitHub Open-Source Code (And Everything Else)</div><div class=post-meta><span title='2022-06-06 00:00:00 +0000 UTC'>June 6, 2022</span>&nbsp;·&nbsp;Tiexin Guo | 郭铁心</div></header><figure class=entry-cover><img loading=lazy srcset="https://www.guotiexin.com/posts/how-to-code-review/mountain_hu123fb5ad5fca446976d841189b845698_635589_360x0_resize_q75_box.jpg 360w ,https://www.guotiexin.com/posts/how-to-code-review/mountain_hu123fb5ad5fca446976d841189b845698_635589_480x0_resize_q75_box.jpg 480w ,https://www.guotiexin.com/posts/how-to-code-review/mountain_hu123fb5ad5fca446976d841189b845698_635589_720x0_resize_q75_box.jpg 720w ,https://www.guotiexin.com/posts/how-to-code-review/mountain_hu123fb5ad5fca446976d841189b845698_635589_1080x0_resize_q75_box.jpg 1080w ,https://www.guotiexin.com/posts/how-to-code-review/mountain_hu123fb5ad5fca446976d841189b845698_635589_1500x0_resize_q75_box.jpg 1500w ,https://www.guotiexin.com/posts/how-to-code-review/mountain.jpg 2048w" sizes="(min-width: 768px) 720px, 100vw" src=https://www.guotiexin.com/posts/how-to-code-review/mountain.jpg alt=mountain width=2048 height=1365></figure><div class=post-content><p>This is <a href=https://www.guotiexin.com/>Tiexin Guo</a>, <a href=https://github.com/devstream-io/devstream>DevStream</a> <a href=https://github.com/orgs/devstream-io/teams/pmc>PMC</a> Chair (an open-source DevOps project with an enthusiastic community.)</p><p>And today, we are going to talk about code review.</p><p>Specifically, we are going to talk about:</p><ul><li>why do we need to do code reviews</li><li>how to review;</li><li>how to do code review on GitHub</li><li>how to review for open-source projects</li></ul><p>But if you want to get acquainted with some best practices for reviewing code of any kind (closed-source projects, on GitLab, etc.,) please do read on, because the principles and methodologies are universal.</p><p>Without further adieu, let&rsquo;s get started.</p><hr><h2 id=1-why-do-we-need-to-do-code-review>1 Why Do We Need to Do Code Review?<a hidden class=anchor aria-hidden=true href=#1-why-do-we-need-to-do-code-review>#</a></h2><p>I know you might already have a question in your head even before reading the title of this post: why do we need to do a code review?</p><p>An excellent question, indeed. Because once you feed the code into a compiler, the result will always be the same. Why on earth do we need to bother reviewing code and writing clean code, anyway?</p><p>Because code is for humans to read, not for machines to run.</p><p>&ldquo;Clean or not&rdquo; makes no difference to a machine, but it makes all the difference for humankind. Cleaner code is much easier to organize, refactor, add new features into, debug, to &mldr;</p><p>Adding a new feature into a bad codebase could easily cost 100x the time compared to a clean codebase. If it&rsquo;s possible at all.</p><p><img loading=lazy src=https://martinfowler.com/articles/is-quality-worth-cost/poor.png alt></p><p>So, the answer is easy: code review is for code quality.</p><hr><h2 id=2-why-not-using-tools-and-automation-for-code-quality>2 Why Not Using Tools and Automation for Code Quality?<a hidden class=anchor aria-hidden=true href=#2-why-not-using-tools-and-automation-for-code-quality>#</a></h2><p>There are already a bunch of tools or third-party services which can help you to evaluate the quality of a piece of code (don&rsquo;t ask me how I knew this.)</p><p>For example, GitHub already showed how many lines of code changes there are in a PR. There are tools to tell you what is a &ldquo;big&rdquo; function, a &ldquo;large&rdquo; file; how many &ldquo;big&rdquo; functions and &ldquo;large&rdquo; files you&rsquo;ve got in your repo; their percentage; etc.</p><p>But hey, you can invent a million metrics, and they are still only &ldquo;indicators&rdquo; of code quality; they don&rsquo;t &ldquo;define&rdquo; good code.</p><p>For example, in my previous company, we used an in-house tool that would check if the length of a function exceeds 50 lines of code. Why 50? why not 40, or 60? If it&rsquo;s 51, is it &ldquo;clean&rdquo;? If not, how about I delete a necessary empty line intended for separating two blocks? How about I delete a necessary comment?</p><p>No metric is perfect, and there are a bunch of ways to hack it and bypass it.</p><p>The only golden standard of code quality is for humans to review. Because code is meant to be read by humans.</p><p><img loading=lazy src=./wtf.png alt></p><hr><h2 id=3-code-review-what-are-the-standards>3 Code Review: What Are the Standards?<a hidden class=anchor aria-hidden=true href=#3-code-review-what-are-the-standards>#</a></h2><p>Once we&rsquo;ve figured out why we need to do it, we need to answer this not-so-technical question: what kind of code needs to be refactored? What kind of code needs to be rewritten? What can be merged? Anyway, what standard should I use?</p><p>I know what you are thinking, and you are right: for code with obvious bugs and errors, you can&rsquo;t merge&rsquo;em. This isn&rsquo;t in the scope of our discussion.</p><p>How about code that runs properly, does what needs to be done, but has a few &ldquo;defects,&rdquo; like &ldquo;missing necessary comments,&rdquo; or &ldquo;not easy to read/understand?&rdquo;</p><h3 id=31-new-contributors>3.1 New Contributors<a hidden class=anchor aria-hidden=true href=#31-new-contributors>#</a></h3><p>I&rsquo;d like to make it clear: for new contributors, it&rsquo;s absolutely fine if they didn&rsquo;t meet your standard (in the beginning.)</p><p>For new contributors, it&rsquo;s key to let them feel they are welcome, and there isn&rsquo;t much that hinders their contribution. Easy to understand: if it&rsquo;s extremely difficult to contribute, they won&rsquo;t. So, the thing is: don&rsquo;t let new contributors feel frustrated. We need to make the process as welcoming as possible for newcomers. Nothing is more important than letting new contributors feel easy and welcome.</p><p>But, this isn&rsquo;t to say that we tolerate &ldquo;dirty&rdquo; code. If a new contributor made a commit that isn&rsquo;t perfect to your standard, guiding them and helping them to learn is the best way, and we should do it encouragingly. They will learn and next time they won&rsquo;t make the same mistakes again. We can even lead by examples, and give them sample code snippets, or even create another improvement commit and let them know.</p><h3 id=32-senior-members>3.2 Senior Members<a hidden class=anchor aria-hidden=true href=#32-senior-members>#</a></h3><p>For senior contributors and members, we intend to keep the quality high.</p><p>It&rsquo;s not enough if a PR merely does what it&rsquo;s supposed to. The readability should be fine, too. Evidently, a quick review reduces the time of code review and we could release a new feature quickly, but in the long run, careless reviews would give us a run for our money: as code quality decreases, it would take longer and longer to do even the most simple task.</p><p>To sum up, we should:</p><ul><li>keep it simple and welcoming for new contributors;</li><li>keep the bar high for ourselves, core developers, and community members.</li></ul><hr><h2 id=4-working-in-an-open-source-project>4 Working in an Open-Source Project<a hidden class=anchor aria-hidden=true href=#4-working-in-an-open-source-project>#</a></h2><p>Last month, 3 more contributors joined the DevStream community. Circled (or to be precise, rectangulared) in red:</p><p><img loading=lazy src=./members.png alt></p><p>Now, we have seven active members in total. Plus, we&rsquo;ve also got c.a. 20 external contributors. Yep, that&rsquo;s not a typo; you read it right: we&rsquo;ve got more than 20 contributors, already.</p><p>As a leader in an open-source project, it&rsquo;s not easy managing an open-source project, coding, reviewing all those pull requests (PR) from the community every day, AND still having a life (don&rsquo;t ask me how I knew this.)</p><p>I guess this isn&rsquo;t uncommon for many project leads. Yes, you need to manage priorities properly and get things done, but there is a line when you simply have too many things to do and can&rsquo;t finish them all.</p><p>Time to have a &ldquo;reviewers&rdquo; group and start &ldquo;group&rdquo; reviews! Simple answer, isn&rsquo;t it?</p><p>But how?</p><p>What&rsquo;s the process? What&rsquo;s the standard? Any tricks to speed it up while keeping the quality high in the air? A million questions to be answered.</p><p>OK, let&rsquo;s try to tackle some of the important ones in this blog post.</p><hr><h2 id=5-taking-up-a-code-review-task>5 Taking up a Code Review Task<a hidden class=anchor aria-hidden=true href=#5-taking-up-a-code-review-task>#</a></h2><p>Let&rsquo;s do a code review, now.</p><p>Before start reviewing anything, let&rsquo;s accept a quest first.</p><p>Why do we need to do this? I&rsquo;m glad you asked.</p><p>The open-source community works asynchronously. That is to say, they don&rsquo;t do too much live communication, like phone calls, video meetings, or even offline, face-to-face meetings. Instead, they rely heavily on messages (by using instant message tools, but probably not reading them instantly) and emails. You need to let other people know that you are on this task so that others won&rsquo;t do the same thing.</p><p>Even if you are not in an open-source project, for example, in a closed-source, internal project with a team sitting together around the table, it&rsquo;s also nice to let others know that &ldquo;hey guys, I&rsquo;ll work on this, please don&rsquo;t do duplicated work.&rdquo;</p><p>OK, then how to mark a task as yours?</p><p>If you are already the reviewer of a PR, the &ldquo;Reviewers&rdquo; section will show your avatar, and there will be some hint in the yellow bar saying that &ldquo;<em>This pull request is waiting on your review.</em>&rdquo; There is also a green button &ldquo;<em>Add your review</em>.&rdquo; Click this button to start a reviewing process.</p><p><img loading=lazy src=./reviewer.png alt></p><p>Then how to become a &ldquo;reviewer&rdquo;?</p><p>Easy question (and not easy at the same time:)</p><p>Since you are a reviewer, you have permission to click the gear &ldquo;⚙️&rdquo; icon to assign a reviewer (for example, yourself.) But if you are not a legit reviewer yet, you should become a reviewer first.</p><hr><h2 id=6-github-code-review-walk-through>6 GitHub Code Review Walk-Through<a hidden class=anchor aria-hidden=true href=#6-github-code-review-walk-through>#</a></h2><p>Click the &ldquo;<em>Add your review</em>&rdquo; button and we will be directed to the Code Review page:</p><p><img loading=lazy src=reviewpage.png alt></p><p>Here, we have a few features worth exploring:</p><ul><li>the &ldquo;file tree&rdquo; on the left</li><li>file filter</li><li>the &ldquo;Viewed&rdquo; checkbox for each file</li><li>the &ldquo;&mldr;&rdquo; button</li></ul><p>Once you&rsquo;ve gotten familiar with all of those quirks and features, your code review life quality will be greatly improved.</p><p>To read more details about these, check out the <a href=https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/reviewing-proposed-changes-in-a-pull-request>official doc here</a>. Explore on. I&rsquo;ll wait for you to finish that doc first.</p><p>For simple code changes, it&rsquo;s more than enough to view the code diff on the code review web page. Example:</p><p><img loading=lazy src=pr1.png alt></p><p>We could easily tell if this change makes sense or not (hint: No. Missing comma. Try to find it :) If it&rsquo;s fixed, we can approve it:</p><p><img loading=lazy src=lgtm.png alt></p><hr><h2 id=7-reviewing-a-pr-locally>7 Reviewing a PR Locally<a hidden class=anchor aria-hidden=true href=#7-reviewing-a-pr-locally>#</a></h2><p>For more complicated PRs, if the author also didn&rsquo;t include any screenshot of the test they had run (<a href=https://github.com/devstream-io/devstream/pull/405>see this example here</a>,） it&rsquo;s better to check out the code locally and review it with the help of an <a href=https://en.wikipedia.org/wiki/Integrated_development_environment>IDE</a>.</p><p>Take this PR for example: <a href=https://github.com/devstream-io/devstream/pull/641>pr #641</a>. To download this PR locally, let&rsquo;s execute:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git fetch upstream pull/641/head:pr641
</span></span><span class=line><span class=cl>git checkout pr641
</span></span></code></pre></div><p>Results:</p><p><img loading=lazy src=pr641.png alt></p><p>Then we simply start our IDE and read the code there:</p><p><img loading=lazy src=ide.png alt></p><p>In IDE, it&rsquo;s much easier to spot possible mistakes (like missing a comma.) And, you can also build, test, and run it locally to see if it passes the unit tests and even integration tests.</p><p>You might think this is redundant because a PR might have triggered a CI process already:</p><p><img loading=lazy src=check.png alt></p><p>But hey, not all CI workflows are born equally. For example, not all CI workflows would run integration tests. So, testing a PR locally is still necessary for bigger PRs and for more complicated changes, to do a quick regression.</p><p>So far, you can fully understand what a PR has changed.</p><hr><h2 id=8-committing-to-somebody-elses-pr>8 Committing to Somebody Else&rsquo;s PR<a hidden class=anchor aria-hidden=true href=#8-committing-to-somebody-elses-pr>#</a></h2><p>A general rule of thumb: don&rsquo;t.</p><p>If you want to do it very badly, rethink your intention. Ask yourself: do you have to do this?</p><p>Normally, it&rsquo;s not recommended to commit to other people&rsquo;s work directly. It&rsquo;s not respectful to the original author, and it&rsquo;s complicated (especially if the original author needs to add another commit.)</p><p>But, rules are to be broken. Like every other single rule in the world, there are exceptions to this rule.</p><p>Taking <a href=https://github.com/devstream-io/devstream/pull/589>this PR</a> for an example:</p><p>It&rsquo;s from a new contributor. We don&rsquo;t want to make &ldquo;contributing to the project&rdquo; too hard, which would shut the door and scare too many potential contributors away.</p><p>Plus, this PR isn&rsquo;t simple enough to get it 100% right. It seems easy, but to make it perfect, you&rsquo;d need to know all <code>dtm</code> sub-commands, which certainly is a high bar to cross for a first-time contributor.</p><p>That&rsquo;s why we added another commit to improve his work (important: and also let him know about it,) and included the test result:</p><p><img loading=lazy src=pr589.png alt></p><p>How to do this exactly?</p><ol><li>Local Commit</li></ol><p>Make changes, then commit:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git add xxx
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;bug: yyy&#34;</span>
</span></span></code></pre></div><ol start=2><li>Find the PR Source Branch</li></ol><p>We can find out from which branch this PR comes from:</p><p><img loading=lazy src=branch.png alt></p><p>Now we see the &ldquo;fork&rdquo; info, like:</p><p><img loading=lazy src=fork.png alt></p><p>Then we can add a new remote:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git remote add himku git@github.com:himku/devstream.git
</span></span></code></pre></div><ul><li>remote: <code>himku</code>(<a href=mailto:git@github.com>git@github.com</a>:himku/devstream.git)</li><li>branch: <code>fix-issue-559</code></li></ul><p>Then we push to it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git push himku HEAD:fix-issue-559
</span></span></code></pre></div><p><img loading=lazy src=push.png alt></p><p>Cool, right? But again: rethink before you want to do this; because more often than not, you don&rsquo;t necessarily want to do it.</p><hr><h2 id=9-summary>9 Summary<a hidden class=anchor aria-hidden=true href=#9-summary>#</a></h2><p>Read more if you are interested:</p><ul><li>Google&rsquo;s <a href=https://google.github.io/eng-practices/review/>Code Review Developer Guide</a></li></ul><p>If you like this article, please bookmark our DevStream blog and my personal blog. We are also on Medium and Dev.to. Here are the links for you:</p><ul><li>DevStream blog: <a href=https://blog.devstream.io>https://blog.devstream.io</a></li><li>Tiexin&rsquo;s blog: <a href=https://www.guotiexin.com>https://www.guotiexin.com</a></li><li>DevStream Medium: <a href=https://medium.com/devstream>https://medium.com/devstream</a></li><li>Tiexin&rsquo;s Medium: <a href=https://medium.com/@IronCore864>https://medium.com/@IronCore864</a></li><li>DevStream Dev.to: <a href=https://dev.to/devstream>https://dev.to/devstream</a></li><li>Tiexin&rsquo;s Dev.to: <a href=https://dev.to/ironcore864/>https://dev.to/ironcore864/</a></li></ul><p>See you in the next article.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.guotiexin.com/tags/how-to/>how-to</a></li><li><a href=https://www.guotiexin.com/tags/code-review/>code review</a></li><li><a href=https://www.guotiexin.com/tags/open-source/>open-source</a></li><li><a href=https://www.guotiexin.com/tags/github/>github</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://www.guotiexin.com>Tiexin Guo</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>